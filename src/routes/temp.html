<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/521/fabric.min.js" integrity="sha512-nPzvcIhv7AtvjpNcnbr86eT6zGtiudLiLyVssCWLmvQHgR95VvkLX8mMpqNKWs1TG3Hnf+tvHpnGmpPS3yJIgw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <script src="https://rawgit.com/kangax/fabric.js/master/dist/fabric.js"></script>
    <scirpt src="https://rawgit.com/fabricjs/fabric.js/master/lib/centering_guidelines.js"></scirpt>
    <script src="https://rawgit.com/fabricjs/fabric.js/master/lib/aligning_guidelines.js"></script>
    <!-- <script src = "./fabric.js"></script> -->
    <title>Document</title>
    <style>
        canvas {
            border: 1px solid rgb(93, 0, 0);
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <canvas id="canvas" width="4000" height="4000">
    </canvas>
    <script>

    var canvas = new fabric.Canvas('canvas');
canvas.setZoom(1)
    initCenteringGuidelines(canvas);
    initAligningGuidelines(canvas);
    var rect = new fabric.Rect({
      width: 100,
      height: 100,
      fill: 'green',
      originX:'center',
      originY:'center',
      left:canvas.width/2,
      top:canvas.height/2,
    });
    var rect2 = new fabric.Rect({
      width: 100,
      height: 100,
      fill: 'green',
      originX:'center',
      originY:'center',
      left:canvas.width/2,
      top:canvas.height/2,
    });
    canvas.add(rect,rect2);


// MOUSEWHEEL ZOOM
canvas.on('mouse:wheel', (opt) => {
  let delta = 0
  
  // -------------------------------
  // WHEEL RESOLUTION
  let wheelDelta = opt.e.wheelDelta
  let deltaY = opt.e.deltaY

  // CHROME WIN/MAC | SAFARI 7 MAC | OPERA WIN/MAC | EDGE
  if (wheelDelta) {
    delta = -wheelDelta / 120
  }
  // FIREFOX WIN / MAC | IE
  if(deltaY) {
    deltaY > 0 ? delta = 1 : delta = -1
  }
  // -------------------------------
  
  let pointer = canvas.getPointer(opt.e)
  let zoom = canvas.getZoom()
  zoom = zoom - delta / 10

  // limit zoom in
  if (zoom > 4) zoom = 4

  // limit zoom out
  if (zoom < 0.2) {
    zoom = 0.2
  }

  //canvas.zoomToPoint({
  //  x: opt.e.offsetX,
  //  y: opt.e.offsetY
  //}, zoom)
  
  canvas.zoomToPoint(
    new fabric.Point(canvas.width / 2, canvas.height / 2),
    zoom);

  opt.e.preventDefault()
  opt.e.stopPropagation() 

  canvas.renderAll()
  canvas.calcOffset()
  
//   updateInfo(canvas)
})
    </script>
</body>

</html>